    <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XO Arena ‚Äî –∫—Ä–µ—Å—Ç–∏–∫–∏‚Äë–Ω–æ–ª–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤ –ò–ò</title>
    <style>
        * {
            box-sizing: border-box;
        }

        :root {
            --accent: #6366f1;
            --accent-2: #ec4899;
            --bg-1: #020617;
            --bg-2: #0f172a;
            --bg-card: rgba(15, 23, 42, 0.9);
            --border-subtle: rgba(148, 163, 184, 0.2);
            --text-main: #e5e7eb;
            --text-soft: #9ca3af;
            --danger: #ef4444;
            --success: #22c55e;
        }

        body {
            margin: 0;
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
            "Segoe UI", sans-serif;
            color: var(--text-main);
            background:
                    radial-gradient(circle at 0 0, #22d3ee11 0, transparent 50%),
                    radial-gradient(circle at 100% 0, #a855f711 0, transparent 55%),
                    radial-gradient(circle at 0 100%, #22c55e11 0, transparent 55%),
                    radial-gradient(circle at 100% 100%, #f9731611 0, transparent 55%),
                    radial-gradient(circle at 50% 50%, #0f172a 0, #020617 55%, #020617 100%);
            overflow-x: hidden;
        }

        .bg-grid {
            position: fixed;
            inset: 0;
            background-image: linear-gradient(to right, rgba(148, 163, 184, 0.06) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(148, 163, 184, 0.06) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.6;
            pointer-events: none;
            z-index: -1;
        }

        .bg-glow {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: -1;
        }

        .bg-glow::before,
        .bg-glow::after {
            content: "";
            position: absolute;
            width: 420px;
            height: 420px;
            border-radius: 999px;
            filter: blur(80px);
            opacity: 0.45;
            mix-blend-mode: screen;
        }

        .bg-glow::before {
            left: -120px;
            top: 10%;
            background: radial-gradient(circle at center, #6366f1, transparent 60%);
        }

        .bg-glow::after {
            right: -120px;
            bottom: 0;
            background: radial-gradient(circle at center, #ec4899, transparent 60%);
        }

        .page {
            max-width: 1120px;
            margin: 0 auto;
            padding: 24px 16px 40px;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            margin-bottom: 28px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-mark {
            width: 40px;
            height: 40px;
            border-radius: 16px;
            background: radial-gradient(circle at 20% 20%, #f9fafb, #e5e7eb 40%, #0f172a 100%);
            box-shadow:
                    0 0 0 1px rgba(148, 163, 184, 0.2),
                    0 18px 35px rgba(15, 23, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-mark span {
            font-weight: 800;
            font-size: 20px;
            background: linear-gradient(135deg, #4f46e5, #ec4899);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        .logo-mark::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.7), transparent 55%);
            opacity: 0.8;
        }

        .logo-text-title {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: 0.04em;
            text-transform: uppercase;
        }

        .logo-text-title span {
            background: linear-gradient(135deg, #e5e7eb, #9ca3af);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        .logo-text-sub {
            font-size: 13px;
            color: var(--text-soft);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 13px;
            color: var(--text-soft);
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.28);
            background: linear-gradient(to right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.6));
            box-shadow: 0 10px 25px rgba(15, 23, 42, 0.75);
        }

        .pill-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: conic-gradient(from 0deg, #22c55e, #22c55e, #a3e635, #facc15, #22c55e);
            box-shadow: 0 0 12px rgba(34, 197, 94, 0.7);
        }

        main {
            display: grid;
            grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
            gap: 24px;
            align-items: stretch;
        }

        @media (max-width: 900px) {
            main {
                grid-template-columns: minmax(0, 1fr);
            }
        }

        .hero {
            margin-bottom: 18px;
        }

        .hero-title {
            font-size: clamp(26px, 3.4vw, 32px);
            font-weight: 700;
            letter-spacing: -0.03em;
            margin: 0 0 10px;
        }

        .hero-title span {
            background: linear-gradient(135deg, #e5e7eb, #f9fafb);
            -webkit-background-clip: text;
            color: transparent;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 10px;
            border-radius: 999px;
            border: 1px solid rgba(129, 140, 248, 0.6);
            background: radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.28), transparent 55%),
            rgba(15, 23, 42, 0.9);
            margin-bottom: 10px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .hero-badge-dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
        }

        .hero-subtitle {
            font-size: 14px;
            color: var(--text-soft);
            max-width: 520px;
            line-height: 1.6;
        }

        .hero-subtitle b {
            color: #e5e7eb;
        }

        .hero-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 12px;
            font-size: 11px;
            color: var(--text-soft);
        }

        .hero-meta-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.22);
            background: linear-gradient(to right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.7));
        }

        .hero-meta-item span.icon {
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 999px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(236, 72, 153, 0.3));
            font-size: 11px;
        }

        .card {
            border-radius: 22px;
            border: 1px solid rgba(148, 163, 184, 0.28);
            background:
                    radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.3), transparent 55%),
                    radial-gradient(circle at 100% 100%, rgba(13, 148, 136, 0.25), transparent 55%),
                    rgba(15, 23, 42, 0.95);
            box-shadow:
                    0 20px 45px rgba(15, 23, 42, 0.9),
                    0 0 0 1px rgba(15, 23, 42, 0.85);
            padding: 18px 18px 16px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: "";
            position: absolute;
            inset: -60%;
            background:
                    radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.5), transparent 55%),
                    radial-gradient(circle at 100% 100%, rgba(236, 72, 153, 0.4), transparent 55%);
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
        }

        .card:hover::before {
            opacity: 0.18;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .card-title {
            font-size: 15px;
            font-weight: 600;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            color: #e5e7eb;
        }

        .card-title span {
            color: #a5b4fc;
        }

        .card-caption {
            font-size: 12px;
            color: var(--text-soft);
        }

        .tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 3px 9px;
            border-radius: 999px;
            border: 1px solid rgba(129, 140, 248, 0.6);
            background: radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.3), transparent 60%);
            font-size: 11px;
        }

        .tag span.icon {
            font-size: 9px;
        }

        .auth-tabs {
            display: inline-flex;
            padding: 2px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.45);
            box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.8);
        }

        .auth-tab {
            border: none;
            background: transparent;
            color: var(--text-soft);
            font-size: 12px;
            padding: 6px 14px;
            border-radius: 999px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .auth-tab span.icon {
            font-size: 13px;
        }

        .auth-tab.active {
            background: radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.7), transparent 60%);
            color: #f9fafb;
            box-shadow:
                    0 0 0 1px rgba(129, 140, 248, 0.7),
                    0 8px 18px rgba(15, 23, 42, 0.9);
        }

        .auth-form {
            display: grid;
            gap: 10px;
            margin-top: 10px;
        }

        .field {
            display: grid;
            gap: 4px;
        }

        .field-label {
            font-size: 11px;
            color: var(--text-soft);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .field-label span.main {
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 600;
            font-size: 10px;
            color: #9ca3af;
        }

        .field-label span.meta {
            font-size: 10px;
            color: #6b7280;
        }

        .input {
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: rgba(15, 23, 42, 0.95);
            padding: 7px 12px;
            color: #e5e7eb;
            font-size: 13px;
            outline: none;
            transition: border-color 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;
        }

        .input::placeholder {
            color: #4b5563;
        }

        .input:focus {
            border-color: rgba(129, 140, 248, 0.9);
            box-shadow:
                    0 0 0 1px rgba(129, 140, 248, 0.7),
                    0 0 30px rgba(79, 70, 229, 0.45);
            background: radial-gradient(circle at 0 0, rgba(129, 140, 248, 0.15), transparent 65%),
            rgba(15, 23, 42, 0.95);
        }

        .auth-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            gap: 10px;
            font-size: 11px;
            color: var(--text-soft);
        }

        .btn {
            position: relative;
            border: none;
            border-radius: 999px;
            padding: 7px 16px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            cursor: pointer;
            overflow: hidden;
            color: #f9fafb;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .btn-primary {
            background:
                    linear-gradient(135deg, #6366f1, #ec4899, #eab308);
            -webkit-background-clip: padding-box;
            background-clip: padding-box;
            box-shadow:
                    0 12px 30px rgba(79, 70, 229, 0.6),
                    0 0 0 1px rgba(15, 23, 42, 0.9);
        }

        .btn-primary::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.4), transparent 60%);
            mix-blend-mode: soft-light;
            opacity: 0;
            transition: opacity 0.18s ease;
        }

        .btn-primary:hover::before {
            opacity: 1;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid rgba(148, 163, 184, 0.8);
            color: var(--text-soft);
        }

        .btn-icon {
            font-size: 14px;
        }

        .btn[disabled] {
            opacity: 0.55;
            cursor: default;
            box-shadow: none;
        }

        .status-line {
            margin-top: 10px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-soft);
        }

        .status-dot {
            width: 9px;
            height: 9px;
            border-radius: 999px;
            background: #6b7280;
        }

        .status-dot.ok {
            background: #22c55e;
            box-shadow: 0 0 12px rgba(34, 197, 94, 0.7);
        }

        .status-dot.err {
            background: #ef4444;
            box-shadow: 0 0 12px rgba(239, 68, 68, 0.8);
        }

        .status-text {
            flex: 1;
        }

        .status-text b {
            color: #e5e7eb;
        }

        .status-secondary {
            font-size: 10px;
            color: #6b7280;
        }

        .game-shell {
            display: grid;
            grid-template-rows: auto auto 1fr auto;
            gap: 10px;
            height: 100%;
        }

        .game-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .game-title {
            font-size: 13px;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: #9ca3af;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 9px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            background: linear-gradient(to right, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.7));
            font-size: 11px;
        }

        .chip span.icon {
            font-size: 13px;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .btn-ghost {
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.35), transparent 60%);
            color: #e5e7eb;
            padding: 4px 11px;
            font-size: 11px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }

        .btn-ghost span.icon {
            font-size: 13px;
        }

        .btn-ghost.secondary {
            background: transparent;
            border-style: dashed;
            color: var(--text-soft);
        }

        .game-main {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.9fr);
            gap: 14px;
            align-items: stretch;
        }

        @media (max-width: 900px) {
            .game-main {
                grid-template-columns: minmax(0, 1fr);
            }
        }

        .board-wrap {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .board {
            width: min(320px, 70vw);
            aspect-ratio: 1 / 1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 8px;
            padding: 12px;
            border-radius: 22px;
            background:
                    radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.28), transparent 55%),
                    radial-gradient(circle at 100% 100%, rgba(236, 72, 153, 0.25), transparent 55%),
                    rgba(15, 23, 42, 0.95);
            box-shadow:
                    0 18px 40px rgba(15, 23, 42, 0.95),
                    0 0 0 1px rgba(15, 23, 42, 0.9);
        }

        .cell {
            border-radius: 18px;
            background: radial-gradient(circle at 20% 20%, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0.98));
            border: 1px solid rgba(148, 163, 184, 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition:
                    transform 0.13s ease-out,
                    box-shadow 0.16s ease,
                    border-color 0.16s ease,
                    background 0.16s ease;
        }

        .cell::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.35), transparent 60%);
            opacity: 0;
            transition: opacity 0.18s ease;
        }

        .cell:hover {
            transform: translateY(-1px) scale(1.02);
            box-shadow:
                    0 10px 22px rgba(15, 23, 42, 0.9),
                    0 0 0 1px rgba(129, 140, 248, 0.6);
            border-color: rgba(129, 140, 248, 0.9);
        }

        .cell:hover::before {
            opacity: 0.45;
        }

        .cell.disabled {
            cursor: default;
            opacity: 0.9;
        }

        .mark {
            font-weight: 800;
            font-size: clamp(40px, 4.6vw, 48px);
            position: relative;
        }

        .mark-x {
            background: linear-gradient(135deg, #f97316, #ec4899);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 0 22px rgba(248, 113, 113, 0.8);
        }

        .mark-o {
            background: linear-gradient(135deg, #22c55e, #22d3ee);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 0 22px rgba(56, 189, 248, 0.8);
        }

        .mark::after {
            content: "";
            position: absolute;
            inset: -8px;
            border-radius: 999px;
            background: radial-gradient(circle at 50% 0, rgba(249, 250, 251, 0.4), transparent 55%);
            opacity: 0.4;
            mix-blend-mode: screen;
        }

        .status-panel {
            display: grid;
            grid-template-rows: auto auto 1fr;
            gap: 8px;
            font-size: 12px;
        }

        .status-line-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        .status-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            background: rgba(15, 23, 42, 0.9);
        }

        .status-chip span.icon {
            font-size: 13px;
        }

        .status-main-text {
            font-size: 13px;
        }

        .status-main-text b {
            color: #f9fafb;
        }

        .status-game-id {
            font-size: 11px;
            color: var(--text-soft);
            display: flex;
            justify-content: space-between;
            gap: 8px;
            align-items: center;
        }

        .status-game-id span.code {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.4);
            max-width: 220px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .status-game-id button {
            border-radius: 999px;
            border: 1px dashed rgba(148, 163, 184, 0.6);
            background: transparent;
            color: var(--text-soft);
            font-size: 10px;
            padding: 2px 6px;
            cursor: pointer;
        }

        .log {
            margin-top: 4px;
            height: 80px;
            border-radius: 14px;
            padding: 8px 10px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.3);
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 11px;
            color: #9ca3af;
            overflow-y: auto;
        }

        .pill-mini {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 3px 7px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            background: rgba(15, 23, 42, 0.9);
            font-size: 10px;
            color: var(--text-soft);
        }

        footer {
            margin-top: 18px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            font-size: 11px;
            color: #4b5563;
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .card {
                padding: 14px 14px 12px;
            }

            .game-main {
                gap: 10px;
            }

            .board {
                width: min(280px, 84vw);
            }
        }
    </style>
</head>
<body>
<div class="bg-grid"></div>
<div class="bg-glow"></div>

<div class="page">
    <header>
        <div class="logo">
            <div class="logo-mark">
                <span>XO</span>
            </div>
            <div>
                <div class="logo-text-title"><span>XO ARENA</span></div>
                <div class="logo-text-sub">–ö—Ä–µ—Å—Ç–∏–∫–∏‚Äë–Ω–æ–ª–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤ –º–∏–Ω–∏‚Äë–º–∞–∫—Å –ò–ò –Ω–∞ Go</div>
            </div>
        </div>
        <div class="header-right">
            <div class="pill">
                <div class="pill-dot"></div>
                <span>–ë—ç–∫–µ–Ω–¥: Go + Gin + PostgreSQL</span>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-badge">
            <span class="hero-badge-dot"></span>
            <span>–û–Ω–ª–∞–π–Ω‚Äë–∞—Ä–µ–Ω–∞ 1vAI</span>
        </div>
        <h1 class="hero-title">
            <span>–ò–≥—Ä–∞–π—Ç–µ –ø—Ä–æ—Ç–∏–≤ –º–æ—â–Ω–æ–≥–æ –ò–ò,</span> –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø–∞—Ä—Ç–∏–∏ –∏ –¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏–≥—Ä—É.
        </h1>
        <p class="hero-subtitle">
            –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∏–≥—Ä—ã, –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ —Å—Å—ã–ª–∫–µ
            –≤–∏–¥–∞ <b>/game/&lt;UUID&gt;</b> –∏ —Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ò–ò –Ω–∞ Go –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–∞—à–∏ —Ö–æ–¥—ã.
        </p>
        <div class="hero-meta">
            <div class="hero-meta-item">
                <span class="icon">‚öôÔ∏è</span>
                <span>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Basic Auth ‚Äî –±–µ–∑ –∫—É–∫–æ–≤ –∏ –ª–∏—à–Ω–µ–π –º–∞–≥–∏–∏</span>
            </div>
            <div class="hero-meta-item">
                <span class="icon">üß†</span>
                <span>–ú–∏–Ω–∏–º–∞–∫—Å –ò–ò –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ñ—Ä–æ–Ω—Ç —Ç–æ–ª—å–∫–æ —à–ª—ë—Ç –∑–∞–ø—Ä–æ—Å—ã</span>
            </div>
            <div class="hero-meta-item">
                <span class="icon">üîó</span>
                <span>–ö–∞–∂–¥–æ–π –∏–≥—Ä–µ ‚Äî —Å–≤–æ–π UUID –∏ —à—ç—Ä–∏–Ω–≥ –ø–æ —Å—Å—ã–ª–∫–µ</span>
            </div>
        </div>
    </section>

    <main>
        <section class="card" id="auth-card">
            <div class="card-header">
                <div>
                    <div class="card-title">–ü–∞–Ω–µ–ª—å <span>–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</span></div>
                    <div class="card-caption">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É</div>
                </div>
                <div class="tag">
                    <span class="icon">üîê</span>
                    <span>Basic Auth</span>
                </div>
            </div>

            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:10px;">
                <div class="auth-tabs" role="tablist">
                    <button type="button" class="auth-tab active" data-mode="login" id="tab-login">
                        <span class="icon">‚û°Ô∏è</span>
                        <span>–í—Ö–æ–¥</span>
                    </button>
                    <button type="button" class="auth-tab" data-mode="signup" id="tab-signup">
                        <span class="icon">‚ú®</span>
                        <span>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
                    </button>
                </div>
                <span class="pill-mini">
                    <span>üë§</span>
                    <span id="current-user-label">–ì–æ—Å—Ç—å</span>
                </span>
            </div>

            <form class="auth-form" id="auth-form" autocomplete="on">
                <div class="field">
                    <label class="field-label" for="login-input">
                        <span class="main">–õ–æ–≥–∏–Ω</span>
                        <span class="meta">–•—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ localStorage</span>
                    </label>
                    <input id="login-input" class="input" name="login" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, player01" required>
                </div>
                <div class="field">
                    <label class="field-label" for="password-input">
                        <span class="main">–ü–∞—Ä–æ–ª—å</span>
                        <span class="meta">–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Basic Auth –∑–∞–≥–æ–ª–æ–≤–∫–µ</span>
                    </label>
                    <input id="password-input" class="input" name="password" type="password" placeholder="–º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞" required>
                </div>

                <div class="auth-footer">
                    <button type="submit" class="btn btn-primary" id="auth-submit">
                        <span class="btn-icon" id="auth-submit-icon">‚û°Ô∏è</span>
                        <span id="auth-submit-label">–í–æ–π—Ç–∏</span>
                    </button>
                    <button type="button" class="btn btn-outline" id="logout-btn" style="display:none;">
                        <span class="btn-icon">üö™</span>
                        <span>–í—ã–π—Ç–∏</span>
                    </button>
                </div>
            </form>

            <div class="status-line" id="auth-status-line">
                <span class="status-dot" id="auth-status-dot"></span>
                <div class="status-text">
                    <div id="auth-status-main">–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.</div>
                    <div class="status-secondary" id="auth-status-secondary">–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º.</div>
                </div>
            </div>
        </section>

        <section class="card">
            <div class="game-shell">
                <div class="game-top">
                    <div class="game-title">–ò–≥—Ä–æ–≤–∞—è –ø–∞–Ω–µ–ª—å <span style="color:#a5b4fc;">/game</span></div>
                    <div class="chip">
                        <span class="icon">üß†</span>
                        <span>–ò–ò —Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ñ—Ä–æ–Ω—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª–µ</span>
                    </div>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn-ghost" id="new-game-btn">
                        <span class="icon">üéÆ</span>
                        <span>–ù–æ–≤–∞—è –∏–≥—Ä–∞</span>
                    </button>
                    <button type="button" class="btn-ghost secondary" id="reload-current-btn">
                        <span class="icon">üîÅ</span>
                        <span>–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—É—â—É—é</span>
                    </button>
                    <button type="button" class="btn-ghost secondary" id="from-url-btn">
                        <span class="icon">üîó</span>
                        <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ URL</span>
                    </button>
                </div>

                <div class="game-main">
                    <div class="board-wrap">
                        <div class="board" id="board">
                            <!-- –∫–ª–µ—Ç–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </div>
                    </div>
                    <div class="status-panel">
                        <div class="status-line-main">
                            <div class="status-chip">
                                <span class="icon">üì°</span>
                                <span id="turn-indicator">–û–∂–∏–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏‚Ä¶</span>
                            </div>
                        </div>

                        <div class="status-game-id">
                            <span>
                                –¢–µ–∫—É—â–∞—è –∏–≥—Ä–∞:
                                <span class="code" id="game-id-label">‚Äî</span>
                            </span>
                            <button type="button" id="copy-link-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                        </div>

                        <div>
                            <div class="log" id="log"></div>
                        </div>
                    </div>
                </div>

                <div class="status-line">
                    <span class="status-dot" id="game-status-dot"></span>
                    <div class="status-text">
                        <div id="game-status-main">–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª.</div>
                        <div class="status-secondary" id="game-status-secondary">
                            –°–µ—Ä–≤–∏—Å—ã: <b>POST /login</b>, <b>POST /signup</b>, <b>POST /game</b>, <b>GET/POST /game/:id</b>.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div>UI: –≤–∞–Ω–∏–ª—å–Ω—ã–π JS + –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Go‚Äë–±—ç–∫–µ–Ω–¥–∞.</div>
        <div>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ <b>/game/&lt;UUID&gt;</b> –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.</div>
    </footer>
</div>

<script>
    // === –ö–æ–Ω—Ñ–∏–≥ –∏ —É—Ç–∏–ª–∏—Ç—ã ===
    const API_BASE = window.location.origin; // —Ç–æ—Ç –∂–µ —Ö–æ—Å—Ç/–ø–æ—Ä—Ç, —á—Ç–æ –∏ —É –±—ç–∫–∞

    function $(id) {
        return document.getElementById(id);
    }

    function logLine(msg) {
        const logEl = $("log");
        const line = document.createElement("div");
        const time = new Date().toLocaleTimeString();
        line.textContent = "[" + time + "] " + msg;
        logEl.appendChild(line);
        logEl.scrollTop = logEl.scrollHeight;
    }

    function setAuthStatus({ ok, text, secondary }) {
        const dot = $("auth-status-dot");
        const main = $("auth-status-main");
        const sub = $("auth-status-secondary");

        dot.classList.remove("ok", "err");
        if (ok === true) {
            dot.classList.add("ok");
        } else if (ok === false) {
            dot.classList.add("err");
        }
        if (text !== undefined) main.innerHTML = text;
        if (secondary !== undefined) sub.innerHTML = secondary;
    }

    function setGameStatus({ state, text, secondary }) {
        const dot = $("game-status-dot");
        const main = $("game-status-main");
        const sub = $("game-status-secondary");

        dot.classList.remove("ok", "err");
        if (state === "ok") dot.classList.add("ok");
        if (state === "err") dot.classList.add("err");
        if (text !== undefined) main.innerHTML = text;
        if (secondary !== undefined) sub.innerHTML = secondary;
    }

    function setTurnIndicator(text) {
        $("turn-indicator").innerHTML = text;
    }

    function setGameId(id) {
        $("game-id-label").textContent = id || "‚Äî";
    }

    function basicHeader(login, password) {
        const payload = btoa(login + ":" + password);
        return "Basic " + payload;
    }

    function getStoredCreds() {
        const raw = window.localStorage.getItem("xoArenaCreds");
        if (!raw) return null;
        try {
            const data = JSON.parse(raw);
            if (!data.login || !data.password) return null;
            return data;
        } catch {
            return null;
        }
    }

    function storeCreds(login, password) {
        window.localStorage.setItem("xoArenaCreds", JSON.stringify({ login, password }));
    }

    function clearCreds() {
        window.localStorage.removeItem("xoArenaCreds");
    }

    // === –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã ===
    let gameId = null;
    let board = [
        [0, 0, 0],
        [0, 0, 0],
        [0, 0, 0]
    ];
    let gameOver = false;
    let isBusy = false;

    function setBusy(flag) {
        isBusy = flag;
        $("auth-submit").disabled = flag;
        $("new-game-btn").disabled = flag;
        $("reload-current-btn").disabled = flag;
        $("from-url-btn").disabled = flag;
    }

    // === –†–µ–Ω–¥–µ—Ä –ø–æ–ª—è ===
    function renderBoard() {
        const boardEl = $("board");
        boardEl.innerHTML = "";
        for (let r = 0; r < 3; r++) {
            for (let c = 0; c < 3; c++) {
                const cell = document.createElement("div");
                cell.className = "cell";
                cell.dataset.row = r;
                cell.dataset.col = c;
                cell.addEventListener("click", () => handleCellClick(r, c));
                boardEl.appendChild(cell);
            }
        }
        updateBoardView();
    }

    function updateBoardView() {
        const cells = $("board").children;
        for (let i = 0; i < cells.length; i++) {
            const r = Math.floor(i / 3);
            const c = i % 3;
            const value = board[r][c];
            const cell = cells[i];
            cell.classList.toggle("disabled", gameOver);
            cell.innerHTML = "";
            if (value === 1 || value === 2) {
                const span = document.createElement("span");
                span.className = "mark " + (value === 1 ? "mark-x" : "mark-o");
                span.textContent = value === 1 ? "X" : "O";
                cell.appendChild(span);
            }
        }
    }

    // === API –≤—ã–∑–æ–≤—ã ===
    async function apiSignup(login, password) {
        const res = await fetch(API_BASE + "/signup", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Accept": "application/json"
            },
            body: JSON.stringify({ login, password })
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
            throw new Error(data.error || "–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");
        }
        return data;
    }

    async function apiLogin(login, password) {
        const res = await fetch(API_BASE + "/login", {
            method: "POST",
            headers: {
                "Authorization": basicHeader(login, password),
                "Accept": "application/json"
            }
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
            throw new Error(data.error || "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏");
        }
        if (data.error) {
            throw new Error(data.error);
        }
        return data;
    }

    async function apiCreateGame() {
        const creds = getStoredCreds();
        if (!creds) {
            throw new Error("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å.");
        }
        const res = await fetch(API_BASE + "/game", {
            method: "POST",
            headers: {
                "Authorization": basicHeader(creds.login, creds.password),
                "Accept": "application/json"
            }
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
            throw new Error(data.error || "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É");
        }
        return data;
    }

    async function apiGetGame(id) {
        const creds = getStoredCreds();
        if (!creds) {
            throw new Error("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å.");
        }
        const res = await fetch(API_BASE + "/game/" + encodeURIComponent(id), {
            method: "GET",
            headers: {
                "Authorization": basicHeader(creds.login, creds.password),
                "Accept": "application/json"
            }
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
            if (data.error) throw new Error(data.error);
            if (res.status === 404) throw new Error("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
            if (res.status === 400) throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID –∏–≥—Ä—ã");
            throw new Error("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: " + res.status);
        }
        if (data.error) {
            throw new Error(data.error);
        }
        return data;
    }

    async function apiMakeMove(id, boardState) {
        const creds = getStoredCreds();
        if (!creds) {
            throw new Error("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å.");
        }
        const res = await fetch(API_BASE + "/game/" + encodeURIComponent(id), {
            method: "POST",
            headers: {
                "Authorization": basicHeader(creds.login, creds.password),
                "Content-Type": "application/json",
                "Accept": "application/json"
            },
            body: JSON.stringify({
                id: id,
                board: boardState,
                currentPlayer: 1
            })
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
            throw new Error(data.error || "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ö–æ–¥");
        }
        if (data.error) {
            throw new Error(data.error);
        }
        return data;
    }

    // === –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ (–º–∏–Ω–∏–º—É–º, –≤—Å—ë –æ—Å–Ω–æ–≤–Ω–æ–µ ‚Äî –Ω–∞ –±—ç–∫–µ) ===
    async function handleCellClick(row, col) {
        if (isBusy || gameOver) return;
        if (board[row][col] !== 0) return;
        if (!gameId) {
            setGameStatus({
                state: "err",
                text: "–ò–≥—Ä–∞ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω–∞.",
                secondary: "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å UUID –∏ —Å—Å—ã–ª–∫—É."
            });
            return;
        }

        const creds = getStoredCreds();
        if (!creds) {
            setGameStatus({
                state: "err",
                text: "–ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.",
                secondary: "–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã —Ö–æ–¥–∏—Ç—å."
            });
            return;
        }

        board[row][col] = 1;
        updateBoardView();
        setGameStatus({
            state: undefined,
            text: "–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–∞—à —Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä‚Ä¶",
            secondary: "–°–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏ —Å–¥–µ–ª–∞–µ—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —Ö–æ–¥ –ò–ò."
        });
        setTurnIndicator("–í–∞—à —Ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –∂–¥—ë–º –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞‚Ä¶");
        logLine("–•–æ–¥ –∏–≥—Ä–æ–∫–∞: (" + row + ", " + col + ")");

        try {
            setBusy(true);
            const data = await apiMakeMove(gameId, board);
            board = data.board || board;
            gameOver = !!data.gameOver;
            updateBoardView();

            if (gameOver) {
                if (data.winner === 1) {
                    setGameStatus({
                        state: "ok",
                        text: "üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –ö–ª–∞—Å—Å–Ω–∞—è –ø–∞—Ä—Ç–∏—è.",
                        secondary: "–ú–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É –∏–ª–∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ —ç—Ç—É."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ø–æ–±–µ–¥–∞ –∏–≥—Ä–æ–∫–∞ X.");
                } else if (data.winner === 2) {
                    setGameStatus({
                        state: "ok",
                        text: "ü§ñ –ò–ò –ø–æ–±–µ–¥–∏–ª –≤ —ç—Ç–æ–π –ø–∞—Ä—Ç–∏–∏.",
                        secondary: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑ ‚Äî –º–∏–Ω–∏–º–∞–∫—Å –Ω–µ —Å–¥–∞—ë—Ç—Å—è —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ø–æ–±–µ–¥–∞ –ò–ò (O).");
                } else {
                    setGameStatus({
                        state: "ok",
                        text: "ü§ù –ù–∏—á—å—è! –°–∏–ª—å–Ω–∞—è –∏–≥—Ä–∞.",
                        secondary: "–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É —Å —Ç–µ–º–∏ –∂–µ —É—á—ë—Ç–∫–∞–º–∏."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –Ω–∏—á—å—è.");
                }
                logLine("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç: " + (data.winner === 1 ? "–ø–æ–±–µ–¥–∞ –∏–≥—Ä–æ–∫–∞" : data.winner === 2 ? "–ø–æ–±–µ–¥–∞ –ò–ò" : "–Ω–∏—á—å—è"));
            } else {
                setGameStatus({
                    state: "ok",
                    text: "–•–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∞–Ω, —Ç–µ–ø–µ—Ä—å —Å–Ω–æ–≤–∞ –≤–∞—à–∞ –æ—á–µ—Ä–µ–¥—å.",
                    secondary: "–ò–ò —É–∂–µ —Å–¥–µ–ª–∞–ª —Ö–æ–¥ O, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ."
                });
                setTurnIndicator("–í–∞—à —Ö–æ–¥ (X).");
            }
        } catch (e) {
            console.error(e);
            logLine("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ö–æ–¥–µ: " + e.message);
            setGameStatus({
                state: "err",
                text: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ö–æ–¥–µ: " + e.message,
                secondary: "–ü–æ–ª–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞."
            });
            // –ü–æ–ø—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É —Å —Å–µ—Ä–≤–µ—Ä–∞, —á—Ç–æ–±—ã –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
            if (gameId) {
                try {
                    const data = await apiGetGame(gameId);
                    board = data.board || board;
                    gameOver = !!data.gameOver;
                    updateBoardView();
                    logLine("–ü–æ–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏.");
                } catch (e2) {
                    logLine("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏: " + e2.message);
                }
            }
        } finally {
            setBusy(false);
        }
    }

    async function createNewGame() {
        const creds = getStoredCreds();
        if (!creds) {
            setGameStatus({
                state: "err",
                text: "–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —Å–ª–µ–≤–∞.",
                secondary: "–õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ Basic Auth –¥–ª—è /game."
            });
            return;
        }
        setBusy(true);
        setGameStatus({
            state: undefined,
            text: "–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∏–≥—Ä—É —á–µ—Ä–µ–∑ POST /game‚Ä¶",
            secondary: "–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ UUID –∏ —Å—Å—ã–ª–∫—É –¥–ª—è —à—ç—Ä–∏–Ω–≥–∞."
        });
        setTurnIndicator("–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∏–≥—Ä—É‚Ä¶");
        logLine("–ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã.");

        try {
            const data = await apiCreateGame();
            if (!data || !data.id) {
                throw new Error("–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç");
            }
            gameId = data.id;
            board = data.board || board;
            gameOver = !!data.gameOver;
            updateBoardView();
            setGameId(gameId);
            const gameUrl = "/game/" + gameId;
            window.history.replaceState(null, "", gameUrl);
            setGameStatus({
                state: "ok",
                text: "–ò–≥—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞! –í–∞—à —Ö–æ–¥ (X).",
                secondary: "–°—Å—ã–ª–∫—É –Ω–∞ —ç—Ç—É –∏–≥—Ä—É –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º –±–ª–æ–∫–µ."
            });
            setTurnIndicator("–í–∞—à —Ö–æ–¥ (X).");
            logLine("–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –∏–≥—Ä–∞: " + gameId);
        } catch (e) {
            console.error(e);
            logLine("–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã: " + e.message);
            setGameStatus({
                state: "err",
                text: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É: " + e.message,
                secondary: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –∏ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã."
            });
        } finally {
            setBusy(false);
        }
    }

    async function loadGameById(id) {
        if (!id || !id.trim()) {
            setGameStatus({
                state: "err",
                text: "–ü—É—Å—Ç–æ–π ID –∏–≥—Ä—ã.",
                secondary: "UUID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–∞ xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx."
            });
            return;
        }
        const cleanId = id.trim().split("/")[0].split("?")[0].replace(/['"]/g, "");
        setBusy(true);
        setGameStatus({
            state: undefined,
            text: "–ó–∞–≥—Ä—É–∂–∞–µ–º –∏–≥—Ä—É " + cleanId + "‚Ä¶",
            secondary: "–ò—Å–ø–æ–ª—å–∑—É–µ–º GET /game/:id c Accept: application/json."
        });
        setTurnIndicator("–ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–≥—Ä—É‚Ä¶");
        logLine("–ó–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –∏–≥—Ä—ã " + cleanId);

        try {
            const data = await apiGetGame(cleanId);
            if (!data || !data.id) {
                throw new Error("–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç");
            }
            gameId = data.id;
            board = data.board || board;
            gameOver = !!data.gameOver;
            updateBoardView();
            setGameId(gameId);
            const gameUrl = "/game/" + gameId;
            window.history.replaceState(null, "", gameUrl);
                if (gameOver) {
                if (data.winner === 1) {
                    setGameStatus({
                        state: "ok",
                        text: "–ò–≥—Ä–∞ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî –ø–æ–±–µ–¥–∞ X.",
                        secondary: "–ú–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É –∏–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–µ."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ø–æ–±–µ–¥–∞ X.");
                } else if (data.winner === 2) {
                    setGameStatus({
                        state: "ok",
                        text: "–ò–≥—Ä–∞ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî –ø–æ–±–µ–¥–∞ O.",
                        secondary: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –ø–∞—Ä—Ç–∏—é –∫–∞–∫ —Ä–∞–∑–±–æ—Ä –∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—É—é."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –ø–æ–±–µ–¥–∞ O.");
                } else {
                    setGameStatus({
                        state: "ok",
                        text: "–ò–≥—Ä–∞ —É–∂–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∏—á—å—ë–π.",
                        secondary: "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ."
                    });
                    setTurnIndicator("–ü–∞—Ä—Ç–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: –Ω–∏—á—å—è.");
                }
            } else {
                setGameStatus({
                    state: "ok",
                    text: "–ò–≥—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –í–∞—à —Ö–æ–¥ (X).",
                    secondary: "–°–¥–µ–ª–∞–π—Ç–µ —Ö–æ–¥, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏ –æ—Ç–≤–µ—Ç–∏—Ç –ò–ò‚Äë—Ö–æ–¥–æ–º."
                });
                setTurnIndicator("–í–∞—à —Ö–æ–¥ (X).");
            }
            logLine("–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞: " + gameId);
        } catch (e) {
            console.error(e);
            logLine("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã: " + e.message);
            setGameStatus({
                state: "err",
                text: "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É: " + e.message,
                secondary: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ UUID, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞."
            });
        } finally {
            setBusy(false);
        }
    }

    // === –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è UI ===
    function applyAuthMode(mode) {
        const isLogin = mode === "login";
        $("tab-login").classList.toggle("active", isLogin);
        $("tab-signup").classList.toggle("active", !isLogin);
        $("auth-submit-label").textContent = isLogin ? "–í–æ–π—Ç–∏" : "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç";
        $("auth-submit-icon").textContent = isLogin ? "‚û°Ô∏è" : "‚ú®";
        if (isLogin) {
            setAuthStatus({
                ok: undefined,
                text: "–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–í–æ–π—Ç–∏¬ª.",
                secondary: "–ï—Å–ª–∏ —É –≤–∞—Å –µ—â—ë –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ ¬´–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è¬ª."
            });
        } else {
            setAuthStatus({
                ok: undefined,
                text: "–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç¬ª.",
                secondary: "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º; –ø–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ö–µ—à–µ."
            });
        }
    }

    async function handleAuthSubmit(event) {
        event.preventDefault();
        if (isBusy) return;
        const login = $("login-input").value.trim();
        const password = $("password-input").value;
        if (!login || !password) {
            setAuthStatus({
                ok: false,
                text: "–õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.",
                secondary: "–ü–æ–ª—è –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏."
            });
            return;
        }

        const mode = $("tab-login").classList.contains("active") ? "login" : "signup";
        setBusy(true);
        try {
            if (mode === "signup") {
                setAuthStatus({
                    ok: undefined,
                    text: "–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è‚Ä¶",
                    secondary: "POST /signup —Å JSON‚Äë—Ç–µ–ª–æ–º {login, password}."
                });
                logLine("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è " + login);
                await apiSignup(login, password);
                setAuthStatus({
                    ok: true,
                    text: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏.",
                    secondary: "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É ¬´–í—Ö–æ–¥¬ª –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∂–µ –¥–∞–Ω–Ω—ã–µ."
                });
                logLine("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å " + login + " –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω.");
                applyAuthMode("login");
        } else {
                setAuthStatus({
                    ok: undefined,
                    text: "–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ /login‚Ä¶",
                    secondary: "POST /login —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Authorization: Basic ‚Ä¶"
                });
                logLine("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è " + login);
                await apiLogin(login, password);
                storeCreds(login, password);
                $("current-user-label").textContent = login;
                $("logout-btn").style.display = "inline-flex";
                setAuthStatus({
                    ok: true,
                    text: "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–≥—Ä—ã –∏ –¥–µ–ª–∞—Ç—å —Ö–æ–¥—ã.",
                    secondary: "–î–∞–Ω–Ω—ã–µ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ."
                });
                setGameStatus({
                    state: undefined,
                    text: "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–∞—Ä—Ç–∏—é –ø—Ä–æ—Ç–∏–≤ –ò–ò.",
                    secondary: "–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–≥—Ä—É –ø–æ UUID /game/:id, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ —É–∂–µ –µ—Å—Ç—å."
                });
                setTurnIndicator("–ì–æ—Ç–æ–≤–æ –∫ –Ω–æ–≤–æ–π –∏–≥—Ä–µ. –ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª.");
                logLine("–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è " + login);
            }
        } catch (e) {
            console.error(e);
            logLine("–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: " + e.message);
            setAuthStatus({
                ok: false,
                text: "–û—à–∏–±–∫–∞: " + e.message,
                secondary: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±—ç–∫–µ–Ω–¥–∞."
            });
        } finally {
            setBusy(false);
        }
    }

    function handleLogout() {
        clearCreds();
        $("current-user-label").textContent = "–ì–æ—Å—Ç—å";
        $("logout-btn").style.display = "none";
        setAuthStatus({
            ok: undefined,
            text: "–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.",
            secondary: "–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É."
        });
        setGameStatus({
            state: undefined,
            text: "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å–±—Ä–æ—à–µ–Ω–∞. –ò–≥—Ä–∞ –ø–æ‚Äë–ø—Ä–µ–∂–Ω–µ–º—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –Ω–æ –Ω–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Ç—Ä–µ–±—É—é—Ç –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å.",
            secondary: "–°–ª–µ–≤–∞ –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –≤–æ–π—Ç–∏ —Ç–µ–º –∂–µ –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º."
        });
        setTurnIndicator("–û–∂–∏–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏‚Ä¶");
        logLine("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª –∏–∑ —Å–∏—Å—Ç–µ–º—ã, –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ—á–∏—â–µ–Ω–æ.");
    }

    // === –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π ===
    function handleReloadCurrent() {
        if (!gameId) {
            setGameStatus({
                state: "err",
                text: "–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.",
                secondary: "–°–æ–∑–¥–∞–π—Ç–µ –∏–≥—Ä—É –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ /game/:id."
            });
            return;
        }
        loadGameById(gameId);
    }

    function handleLoadFromUrl() {
        const path = window.location.pathname || "/";
        let id = "";
        if (path.startsWith("/game/") && path.length > 6) {
            id = path.substring(6);
        }
        const finalId = window.prompt("–í–≤–µ–¥–∏—Ç–µ UUID –∏–≥—Ä—ã (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –µ—Å—Ç—å):", id);
        if (finalId === null) return;
        loadGameById(finalId);
    }

    async function handleCopyLink() {
        if (!gameId) {
            setGameStatus({
                state: "err",
                text: "–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –∏–≥—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É.",
                secondary: "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É –∏ –ø–æ–ª—É—á–∏—Ç—å UUID."
            });
            return;
        }
        const url = window.location.origin + "/game/" + gameId;
        try {
            await navigator.clipboard.writeText(url);
            setGameStatus({
                state: "ok",
                text: "–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.",
                secondary: url
            });
            logLine("–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞: " + url);
        } catch {
            setGameStatus({
                state: "ok",
                text: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É—é –≤—ã–¥–µ–ª–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∏–∂–µ.",
                secondary: url
            });
        }
    }

    // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ===
    function initFromStorage() {
        const creds = getStoredCreds();
        if (creds) {
            $("login-input").value = creds.login;
            $("current-user-label").textContent = creds.login;
            $("logout-btn").style.display = "inline-flex";
            setAuthStatus({
                ok: true,
                text: "–ù–∞–π–¥–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <b>" + creds.login + "</b>.",
                secondary: "–ú–æ–∂–Ω–æ —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–≥—Ä—ã –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –∏ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞."
            });
            setGameStatus({
                state: undefined,
                text: "–ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–æ UUID.",
                secondary: "–ü—Ä–∏ –æ—à–∏–±–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞ ‚Äî localStorage –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π ¬´–í—ã–π—Ç–∏¬ª."
            });
            setTurnIndicator("–ì–æ—Ç–æ–≤–æ –∫ –Ω–æ–≤–æ–π –∏–≥—Ä–µ. –ù–∞–∂–º–∏—Ç–µ ¬´–ù–æ–≤–∞—è –∏–≥—Ä–∞¬ª.");
            logLine("–ù–∞–π–¥–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è " + creds.login + ".");
        } else {
            setAuthStatus({
                ok: undefined,
                text: "–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è.",
                secondary: "–î–∞–Ω–Ω—ã–µ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞."
            });
            setTurnIndicator("–û–∂–∏–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏‚Ä¶");
        }
    }

    function initFromUrl() {
        const path = window.location.pathname || "/";
        if (path.startsWith("/game/") && path.length > 6) {
            const id = path.substring(6).split("/")[0].split("?")[0].trim();
            if (id && id.length >= 32) {
                setGameId(id);
                loadGameById(id);
            }
        }
    }

    function bindEvents() {
        $("tab-login").addEventListener("click", () => applyAuthMode("login"));
        $("tab-signup").addEventListener("click", () => applyAuthMode("signup"));
        $("auth-form").addEventListener("submit", handleAuthSubmit);
        $("logout-btn").addEventListener("click", handleLogout);

        $("new-game-btn").addEventListener("click", createNewGame);
        $("reload-current-btn").addEventListener("click", handleReloadCurrent);
        $("from-url-btn").addEventListener("click", handleLoadFromUrl);
        $("copy-link-btn").addEventListener("click", handleCopyLink);
    }

    window.addEventListener("load", () => {
        renderBoard();
        applyAuthMode("login");
        initFromStorage();
        bindEvents();
        initFromUrl();
        logLine("–§—Ä–æ–Ω—Ç–µ–Ω–¥ XO Arena –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Go‚Äë–±—ç–∫–µ–Ω–¥–æ–º.");
    });
</script>
</body>
</html>